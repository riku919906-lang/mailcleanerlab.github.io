<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gmail æ•´ç†ãƒ„ãƒ¼ãƒ« - automaker-hub</title>

  <style>
/* ===================== */
/*   å•ã„åˆã‚ã›ãƒœã‚¿ãƒ³   */
/* ===================== */
.btn-contact {
  padding: 8px 14px;
  background: rgba(30, 31, 41, 0.9);
  border: 1px solid #3a3b45;
  border-radius: 10px;
  color: #e4e4e7;
  font-size: 0.82rem;
  text-decoration: none;
  transition: 0.2s;
  display: inline-flex;
  align-items: center;
}
.btn-contact:hover {
  background: rgba(46, 47, 56, 0.9);
  border-color: #4b4c58;
}

/* ===================== */
/*   æ—¢å­˜ãƒ‡ã‚¶ã‚¤ãƒ³        */
/* ===================== */

:root {
  --bg: #0f172a;
  --card-bg: #020617;
  --accent: #22c55e;
  --accent-soft: rgba(34, 197, 94, 0.15);
  --border: #1f2937;
  --text-main: #e5e7eb;
  --text-sub: #9ca3af;
  --danger: #ef4444;
  --danger-soft: rgba(239, 68, 68, 0.15);
  --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.8);
  --radius-lg: 18px;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: radial-gradient(circle at top, #1f2937 0, #020617 55%, #000 100%);
  color: var(--text-main);
  min-height: 100vh;
}

.page {
  max-width: 1200px;
  margin: 0 auto;
  padding: 16px 16px 40px;
}

header { padding: 8px 0 16px; }

.headline {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
}

.headline-left h1 {
  margin: 0 0 4px;
  font-size: 1.4rem;
  letter-spacing: 0.03em;
  display: flex;
  align-items: center;
  gap: 8px;
}

.headline-left h1 span.badge {
  font-size: 0.7rem;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.4);
  color: var(--text-sub);
}

.headline-left p {
  margin: 0;
  font-size: 0.82rem;
  color: var(--text-sub);
}

.headline-right {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

/* ã“ã“ã«å•ã„åˆã‚ã›ãƒœã‚¿ãƒ³ãŒå…¥ã‚‹ï¼ */

.pill {
  font-size: 0.7rem;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.4);
  color: var(--text-sub);
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.pill strong { color: var(--accent); }

.auth-area {
  margin-top: 12px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.btn-auth {
  padding: 8px 14px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 0.85rem;
  font-weight: 600;
  background: linear-gradient(135deg, var(--accent), #16a34a);
  color: #000;
  box-shadow: 0 10px 30px rgba(34, 197, 94, 0.45);
}
.btn-auth.secondary {
  background: transparent;
  border: 1px solid rgba(148, 163, 184, 0.5);
  color: var(--text-sub);
}

/* â€” ã“ã“ã¾ã§ Part1 â€” */
/* ===================== */
/* ã“ã“ã‹ã‚‰æ—¢å­˜ã‚¹ã‚¿ã‚¤ãƒ«ç¶šã */
/* ===================== */

.btn-auth span.icon { font-size: 1.1rem; }

.layout {
  display: flex;
  gap: 18px;
  margin-top: 16px;
  align-items: flex-start;
}

.card {
  background: radial-gradient(circle at top left, #111827 0, #020617 40%, #000 100%);
  border-radius: var(--radius-lg);
  border: 1px solid rgba(55, 65, 81, 0.7);
  box-shadow: var(--shadow-soft);
  padding: 16px 18px;
  flex: 1;
  min-width: 0;
}

.card h2 {
  margin-top: 0;
  font-size: 1rem;
  display: flex;
  align-items: center;
  gap: 8px;
}

.card h2 .dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--accent);
  box-shadow: 0 0 12px rgba(34, 197, 94, 0.9);
}

...ï¼ˆâ€»ã“ã“ã¯å‰ã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«ãªã®ã§çœç•¥å¯ï¼šã‚ãªãŸã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã™ã§ã«å…¥ã£ã¦ã‚‹éƒ¨åˆ†ã§ã™ï¼‰...

/* ===================== */
/* ã‚¹ãƒãƒ›å¯¾å¿œ */
/* ===================== */
@media (max-width: 768px) {
  .page { padding: 12px 10px 30px; }
  .layout { flex-direction: column; }
  .card { padding: 14px 14px 16px; }
  .headline { gap: 8px; }
  .headline-right { justify-content: flex-start; }
  .button-row { flex-direction: column; }
  .btn-main, .btn-secondary, .btn-danger, .btn-ghost { width: 100%; }
}
  </style>
</head>

<body>
  <div class="page">
    <header>
      <div class="headline">

        <!-- å·¦ï¼šã‚¿ã‚¤ãƒˆãƒ« -->
        <div class="headline-left">
          <h1>
            Gmail æ•´ç†ãƒ„ãƒ¼ãƒ«
            <span class="badge">automaker-hub</span>
          </h1>
          <p>ã„ã‚‰ãªã„ãƒ¡ãƒ¼ãƒ«ã‚’ä¸€æ°—ã«æ•´ç†ã€‚æ¤œç´¢æ¡ä»¶ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦ã€å‰Šé™¤ãƒ»ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ»æ—¢èª­åŒ–ã¾ã§ã¾ã¨ã‚ã¦å®Ÿè¡Œã—ã¾ã™ã€‚</p>
        </div>

        <!-- å³ï¼šã‚¿ã‚° + å•ã„åˆã‚ã›ãƒœã‚¿ãƒ³ -->
        <div class="headline-right">
          <span class="pill">Gmail ç”¨ãƒ„ãƒ¼ãƒ« / <strong>åç›ŠåŒ–å¯¾å¿œãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</strong></span>

          <!-- â† ã‚³ãƒ¬ã ã‘ã§OKï¼ˆä¿®æ­£ç‰ˆãƒœã‚¿ãƒ³ï¼‰ -->
          <a href="contact.html" class="btn-contact">ãŠå•ã„åˆã‚ã›</a>
        </div>
      </div>

      <!-- OAuth ãƒœã‚¿ãƒ³ -->
      <div class="auth-area">
        <button id="btn-authorize" class="btn-auth"><span class="icon">ğŸ”</span>Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºï¼ˆOAuthï¼‰</button>
        <button id="btn-signout" class="btn-auth secondary"><span class="icon">ğŸšª</span>åˆ‡æ–­ / ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆ</button>
        <span class="pill-mini" id="auth-status"><span class="dot"></span> ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœªé€£æº</span>
      </div>

    </header>

    <!-- ã“ã“ã‹ã‚‰æœ¬ä½“ UIï¼ˆâ€»ã‚ãªãŸã® index.html ã¨åŒã˜ãªã®ã§çœç•¥ï¼‰ -->
    <!-- ã‚ŠããŒè²¼ã£ã¦ãã‚ŒãŸ UI éƒ¨åˆ†ã¯ãã®ã¾ã¾ä½¿ã£ã¦OKï¼ -->

    <!-- â–¼â–¼â–¼ JavaScriptï¼ˆã‚ãªãŸã®å…ƒã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ï¼‰ â–¼â–¼â–¼ -->
    <script>
      // â–¼ ã“ã“ã‚‚ã™ã¹ã¦å‰ã¨åŒã˜ï¼ˆGmail ãƒ€ãƒŸãƒ¼å®Ÿè£…ï¼‰
      // å¿…ãšã‚ãªãŸã®å…ƒã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«ãã®ã¾ã¾è²¼ã‚‹ã“ã¨ï¼
    </script>

  </div>

<script>
  // ====== OAuth è¨­å®š ======
  const CLIENT_ID = "923017588150-th43jikkldliggrt258aqg95hrk2ob73.apps.googleusercontent.com";
  const REDIRECT_URI = "https://automaker-hub.github.io/mailcleanerlab.github.io/"; 
  const SCOPES = "https://www.googleapis.com/auth/gmail.modify";

  // ====== Google OAuth é–‹å§‹ ======
  function loginWithGoogle() {
    const url =
      "https://accounts.google.com/o/oauth2/v2/auth" +
      "?client_id=" + CLIENT_ID +
      "&redirect_uri=" + encodeURIComponent(REDIRECT_URI) +
      "&response_type=token" +
      "&scope=" + encodeURIComponent(SCOPES) +
      "&include_granted_scopes=true";

    window.location.href = url;
  }

  document.getElementById("oauth-btn").addEventListener("click", loginWithGoogle);

  // ====== Google ã‹ã‚‰è¿”ã£ã¦ããŸã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾— ======
  function extractAccessToken() {
    const hash = window.location.hash.substring(1);
    const params = new URLSearchParams(hash);
    const token = params.get("access_token");

    if (token) {
      localStorage.setItem("gmail_token", token);

      // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
      const statusEl = document.getElementById("status-text");
      if (statusEl) statusEl.textContent = "é€£æºæ¸ˆã¿ âœ”";

      console.log("Google OAuth æˆåŠŸï¼ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜ã—ã¾ã—ãŸ");
    }
  }

  extractAccessToken();

  // ====== Gmail API ãƒ†ã‚¹ãƒˆï¼ˆä»»æ„ã§å®Ÿè¡Œå¯èƒ½ï¼‰ ======
  async function testGmailAPI() {
    const token = localStorage.getItem("gmail_token");
    if (!token) {
      console.log("ãƒˆãƒ¼ã‚¯ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„");
      return;
    }

    const res = await fetch(
      "https://gmail.googleapis.com/gmail/v1/users/me/messages?q=label:inbox",
      {
        headers: { Authorization: "Bearer " + token }
      }
    );

    const data = await res.json();
    console.log("Gmail API çµæœ:", data);
  }

  // ä¾‹ï¼šãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å¾Œã«è‡ªå‹•å®Ÿè¡Œã—ãŸããªã„å ´åˆã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦OK
  // testGmailAPI();
</script>


</body>
</html>
